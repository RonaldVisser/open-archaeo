<!-- main nav -->
<section class="sidebar-mainnav">
	<ul class="sidebar-nav">
		{{ $currentPage := . }} 
		{{ range .Site.Menus.main }} 
			{{ if .HasChildren }}
			<li {{ if $currentPage.HasMenuCurrent "main" . }}class="active"{{ end }}>
				<a href="#">{{ .Pre }}
					<span>{{ .Name }}</span>
				</a>
				<ul class="sidebar-nav">
					{{ range .Children }}
					<li {{ if $currentPage.IsMenuCurrent "main" . }}class="active"{{ end }}>
						<a href="{{ .URL }}">{{ .Name | title }}</a>
					</li>
					{{ end }}
				</ul>
			</li>
			{{ else }} <!-- No children -->
				<li>
					<a href="{{.URL}}">{{ .Pre }}
						<span>{{ .Name | title }}</span>
					</a>
				</li>
			{{ end }} 
		{{ end }}
	</ul>
</section>
	
<!-- categories -->
<div class="sidebar-taxonomy">
    <h2>Categories</h2>
	<ul class="sidebar-nav">
    {{ range .Site.Taxonomies.categories }}
        <li>
            <a href="{{ .Page.Permalink }}" title="Entries in category '{{ .Page.Title }}'" class="badge">{{ .Page.Title | upper }}&nbsp;<span class="taxonomy-count post__meta">({{ .Count }})</span></a>
        </li>
    {{ end }}
    </ul>
</div>

<!-- tags -->
<div class="sidebar-taxonomy">
    <h2>Tags</h2>
	<ul class="sidebar-nav">
	{{ range .Site.Taxonomies.tags }}
        <li>
            <a href="{{ .Page.Permalink }}" title="Entries tagged '{{ .Page.Title }}'" class="badge">{{ .Page.Title }}&nbsp;<span class="taxonomy-count post__meta">({{ .Count }})</span></a>
        </li>
    {{ end }}
    </ul>
</div>
